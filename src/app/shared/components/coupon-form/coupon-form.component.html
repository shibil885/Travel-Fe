<form class="grid grid-cols-1 lg:grid-cols-2 gap-6" [formGroup]="couponForm" (ngSubmit)="onSubmit()">
    <div class="form-field relative">
        <input type="text" id="code" class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="code" />
        <label for="code" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Coupon
            Code</label>
        <div *ngIf="couponForm.get('code')?.touched && couponForm.get('code')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('code')?.errors?.['required'] && couponForm.get('code')?.invalid">Code is
                required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('code')?.errors?.['minlength'] && couponForm.get('code')?.invalid">Code must
                have 4 letters*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('code')?.errors?.['invalidCoupon'] && couponForm.get('code')?.invalid">Please
                enter a valid coupon code*</small>
        </div>
    </div>

    <div class="form-field relative">
        <select id="discount_type" class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="discount_type">
            <option value="" disabled selected>Select Discount Type</option>
            <option value="percentage">Percentage</option>
            <option value="fixed">Fixed</option>
        </select>
        <label for="discount_type" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Discount
            Type</label>
        <div *ngIf="couponForm.get('dicount_type')?.touched && couponForm.get('dicount_type')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('dicount_type')?.errors?.['required'] && couponForm.get('dicount_type')?.invalid">Discount
                type is required*</small>
        </div>
    </div>

    <div class="form-field relative col-span-1 lg:col-span-2">
        <input type="text" id="description"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="description" />
        <label for="description"
            class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Description</label>
        <div *ngIf="couponForm.get('description')?.touched && couponForm.get('description')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('description')?.errors?.['required'] && couponForm.get('description')?.invalid">Description
                is required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('description')?.errors?.['invalidDescription'] && couponForm.get('description')?.invalid">Description
                must be 20-500 characters long and may only include letters, numbers, spaces, and common punctuation (.
                , ' ! ? -)*</small>
        </div>
    </div>

    <div class="form-field relative">
        <input type="date" name="expiry_date" id="expiry_date"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="expiry_date" />
        <label for="expiry_date" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">
            Expiry Date
        </label>

        <div *ngIf="couponForm.get('expiry_date')?.touched && couponForm.get('expiry_date')?.invalid">
            <small class="text-red-500 text-sm block" *ngIf="couponForm.get('expiry_date')?.errors?.['required']">
                Expiry Date is required*
            </small>
            <small class="text-red-500 text-sm block" *ngIf="couponForm.get('expiry_date')?.errors?.['invalidDate']">
                Expiry Date must be a future date*
            </small>
        </div>
    </div>


    <div class="form-field relative">
        <input type="number" id="minAmt"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]" formControlName="minAmt" />
        <label for="minAmt" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Minimum
            Amount</label>
        <div *ngIf="couponForm.get('minAmt')?.touched && couponForm.get('minAmt')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('minAmt')?.errors?.['required'] && couponForm.get('minAmt')?.invalid">Min amount is
                required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('minAmt')?.errors?.['invalidPrice'] && couponForm.get('minAmt')?.invalid"> Min
                amount
                must be a positive number*</small>
        </div>
    </div>

    <div class="form-field relative" *ngIf="couponForm.get('discount_type')?.value == 'percentage'">
        <input type="number" id="maxAmt"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]" formControlName="maxAmt" />
        <label for="maxAmt" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Maximum
            Discount</label>
        <div *ngIf="couponForm.get('maxAmt')?.touched && couponForm.get('code')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('maxAmt')?.errors?.['required'] && couponForm.get('maxAmt')?.invalid">Max discount
                is required*
            </small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('maxAmt')?.errors?.['invalidPrice'] && couponForm.get('maxAmt')?.invalid">Max
                discount must be a positive number*</small>
        </div>
    </div>

    <div class="form-field relative" *ngIf="couponForm.get('discount_type')?.value == 'percentage'">
        <input type="number" id="discount_value"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="percentage" />
        <label for="discount_value"
            class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Percentage</label>
        <div *ngIf="couponForm.get('percentage')?.touched && couponForm.get('percentage')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('percentage')?.errors?.['required'] && couponForm.get('percentage')?.invalid">Percentage
                is required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('percentage')?.errors?.['min'] && couponForm.get('percentage')?.invalid">Percentage
                must be between 1 and 100*
            </small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('percentage')?.errors?.['max'] && couponForm.get('percentage')?.invalid">Percentage
                must be between 1 and 99*</small>
        </div>
    </div>

    <div class="form-field relative" *ngIf="couponForm.get('discount_type')?.value == 'fixed'">
        <input type="number" id="discount_value"
            class="w-full border-2 p-3 rounded-md focus:outline-none focus:border-[#3D52A0]"
            formControlName="discount_value" />
        <label for="discount_value" class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-500">Discount
            Value</label>
        <div *ngIf="couponForm.get('discount_value')?.touched && couponForm.get('discount_value')?.invalid">
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('discount_value')?.errors?.['required'] && couponForm.get('discount_value')?.invalid">Code
                is required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('discount_value')?.errors?.['required'] && couponForm.get('discount_value')?.invalid">Code
                is required*</small>
            <small class="text-red-500 text-sm block"
                *ngIf="couponForm.get('discount_value')?.errors?.['required'] && couponForm.get('discount_value')?.invalid">Code
                is required*</small>
        </div>
    </div>
    <div *ngIf="isNotValidForm" class="text-red-500 text-sm">
        Please fill all required fields correctly.
    </div>
    
    <button
        type="submit"
        class="submit-btn col-span-1 lg:col-span-2"
        [ngStyle]="{'background': isNotValidForm ? 'linear-gradient(135deg, #ff4d4d, #ff1a1a)' : 'linear-gradient(135deg, #7091e6, #3d52a0)'}"
        (click)="onSubmit()"
    >
        Create Coupon
    </button>
    
</form>