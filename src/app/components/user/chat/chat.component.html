<!-- <div class="flex h-screen bg-gray-100">

  <div class="w-1/4 bg-gray-800 text-white flex flex-col">
    <div class="p-4 border-b border-gray-700">
      <h1 class="text-xl font-bold">Chats</h1>
    </div>
    <div class="flex-1 overflow-y-auto">
      <div class="p-2 hover:bg-gray-700 cursor-pointer" *ngFor="let chat of chats">
        <div class="flex items-center">
          <img
            src="{{ chat.avatar }}"
            alt="Avatar"
            class="w-10 h-10 rounded-full mr-3"
          />
          <div>
            <h2 class="font-semibold">{{ chat.name }}</h2>
            <p class="text-sm text-gray-400">{{ chat.lastMessage }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="flex-1 flex flex-col">
    <div class="p-4 bg-gray-800 text-white border-b border-gray-700">
      <h2 class="text-lg font-semibold">{{ selectedChat?.name }}</h2>
    </div>
    <div class="flex-1 overflow-y-auto bg-white p-4">
      <div *ngFor="let message of messages">
        <div
          class="mb-4"
          [ngClass]="{
            'text-right': message.sender === 'me',
            'text-left': message.sender !== 'me'
          }"
        >
          <div
            class="inline-block px-4 py-2 rounded-lg"
            [ngClass]="{
              'bg-blue-500 text-white': message.sender === 'me',
              'bg-gray-200 text-gray-800': message.sender !== 'me'
            }"
          >
            {{ message.content }}
          </div>
        </div>
      </div>
    </div>
    <div class="p-4 border-t border-gray-300 bg-white flex">
      <input
        type="text"
        [(ngModel)]="newMessage"
        placeholder="Type a message..."
        class="flex-1 px-4 py-2 border rounded-lg focus:outline-none"
      />
      <button
        (click)="sendMessage()"
        class="ml-4 px-4 py-2 bg-blue-500 text-white rounded-lg"
      >
        Send
      </button>
    </div>
  </div>
</div> -->
<div class="h-screen flex flex-col md:flex-row">
    <!-- Sidebar -->
    <div class="w-full md:w-1/4 bg-white shadow-lg flex flex-col border-r" [class.hidden]="isMobile && showChatWindow">
        <!-- Header -->
        <div class="p-4">
            <h1 class="text-xl font-bold text-gray-800">Chats</h1>
        </div>

        <!-- Search Bar -->
        <div class="p-4">
            <input type="text" placeholder="Search chats..."
                class="w-full px-4 py-2 bg-gray-50 text-black border-b-4 rounded-t focus:outline-none focus:bg-gray-200 focus:border-b-[#ff6b54]" />
        </div>

        <!-- Chats List -->
        <div class="flex-1 overflow-y-auto">
            <div class="flex items-center p-3 hover:bg-gray-50 cursor-pointer" *ngFor="let chat of chats"
                [class.bg-gray-100]="chat === selectedChat" (click)="selectChat(chat)">
                <img src="{{ chat.avatar }}" alt="Avatar" class="w-12 h-12 rounded-full mr-3" />
                <div class="flex-1">
                    <h2 class="font-semibold text-gray-800">{{ chat.name }}</h2>
                    <p class="text-sm text-gray-500 truncate">{{ chat.lastMessage }}</p>
                </div>
                <span class="text-xs text-gray-400">{{ chat.time }}</span>
            </div>
        </div>
    </div>

    <!-- Chat Window -->
    <div class="flex-1 flex flex-col bg-white shadow-lg rounded-lg" [class.hidden]="isMobile && !showChatWindow">
        <!-- Header -->
        <div class="flex items-center p-4 border-b bg-gray-50">
            <button class="block md:hidden mr-4 text-gray-500 hover:text-gray-800" (click)="backToChatList()">
                â¬… Back
            </button>
            <img src="{{ selectedChat?.avatar }}" alt="Avatar" class="w-10 h-10 rounded-full mr-3" />
            <h2 class="text-lg font-semibold text-gray-800">
                {{ selectedChat?.name }}
            </h2>
        </div>

        <!-- Messages -->
        <div class="flex-1 overflow-y-auto p-4 bg-gray-100">
            <div *ngFor="let message of messages" class="mb-4 flex" [ngClass]="{
                'justify-end': message.sender === 'me',
                'justify-start': message.sender !== 'me'
              }">
                <div class="px-4 py-2 rounded-lg shadow message-bubble" [ngClass]="{
                  'bg-[#ff6b54] text-white': message.sender === 'me',
                  'bg-gray-200 text-gray-800': message.sender !== 'me'
                }">
                    <ng-container *ngIf="message.content; else imageTemplate">
                        {{ message.content }}
                    </ng-container>
                    <ng-template #imageTemplate>
                        <img [src]="message.imageUrl" alt="Uploaded Image" class="chat-image"
                            (click)="openImageModal(message.imageUrl)">
                    </ng-template>
                    <div class="text-xs mt-1" [ngClass]="{
                    'text-right': message.sender === 'me',
                    'text-left': message.sender !== 'me'
                  }">
                        <span class="text-gray-400">{{ message.timestamp }}</span>
                        <span *ngIf="message.sender === 'me'" class="ml-2 text-green-400">âœ”âœ”</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input -->
        <div class="p-4 bg-white border-t flex items-center">
            <input type="text" [(ngModel)]="newMessage" placeholder="Type a message..."
                class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-blue-300" />
            <!-- <input type="file" (change)="uploadImage($event)" class="hidden" #fileInput />
            <button (click)="fileInput.click()"
                class="ml-2 px-4 py-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300">
                ðŸ“·
            </button> -->
            <button (click)="sendMessage()" class="ml-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-600">
                Send
            </button>
        </div>
    </div>
</div>

<div *ngIf="modalImage" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="relative">
        <img [src]="modalImage" alt="Full Image" class="max-w-full max-h-screen rounded-lg">
        <button (click)="closeImageModal()" class="absolute top-2 right-2 text-white text-2xl font-bold">Ã—</button>
    </div>
</div>